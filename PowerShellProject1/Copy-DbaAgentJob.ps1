#
#\\fldsvm_apps01\SQLSHARED\Deployments\20170912\Copy-DbaAgentJob.ps1#
#
<##Pre-req: 
#Open PowerShell as Admin
install-module dbatools
import-module dbatools
update-module dbatools
update-dbatools
Get-Help Copy-DbaAgentJob -ShowWindow
#>

import-module dbatools

#Refresh on Replicas and Enable.
$replicas = 'FLDSVRSQL05','MLBSVRSQL02'
foreach ($svr in $replicas)
{
	Copy-DbaAgentJob -Source FLDSVRSQL03 -Destination $svr -Job `
	 'Chk Local Drive Space' `
	,'CommandLog Cleanup' `
	,'IndexOptimize - USER_DATABASES' `
	,'Maintenance - Nightly' `
	,'JOB_ClaimCheck' `
	,'Notifications - Claims For Monitored Agencies' `
	,'Output File Cleanup' `
	,'Performers Circle Monthly Update' `
	,'Populate BODHistory Tables' `
	,'Populate Dialer Campaigns' `
	,'Populate UV Direct Policy Stats' `
	,'PopulateEboxPositive' `
	,'QUASR - MonthEndCapture' `
	,'Recycle' `
	,'Reload ISM' `
	,'Reports - Agency Appointments' `
	,'Reports - CatastropheModeling' `
	,'Reports - High Dollar Renewals' `
	,'Reports - Inforce' `
	,'Reports - Report Change Monitor' `
	,'Reports - Reported and Closed' `
	,'Reports - Reported and Closed (MTD)' `
	,'sp_delete_backuphistory' `
	,'sp_purge_jobhistory' `
	,'syspolicy_purge_history' `
	-Force |ft -AutoSize 
}

<#
#TSQL

:connect fldsvrsql03
go
use msdb
go
SELECT ','''+NAME+''' `' [Enabled] FROM SYSJOBS J WHERE LEN(NAME)=36 ORDER  BY 1

#>


## replcared by SSRSFailover.sql

#Refresh SSRS Jobs but disable.
$replicas = 'FLDSVRSQL05','MLBSVRSQL02'
foreach ($svr in $replicas)
{
	Copy-DbaAgentJob -Source FLDSVRSQL03 -Destination $svr -Job `
'02E1243E-C7A6-4337-9BDF-C893990B89F9' `
,'030599D6-C5A5-46E9-A008-BCB273520E55' `
,'0631ED86-7A54-4F86-A897-BEA9B788A348' `
,'099E482D-134E-44B9-9012-34CC0C237676' `
,'0C46DBB3-59A9-4601-994D-D182F133E4A7' `
,'0F43755B-CA23-4894-8CC2-DD08EBE4E7E6' `
,'13BC03B3-6E7F-4B1B-9957-CA95CFF157F5' `
,'158FECD5-6A01-44DE-BB0B-80E56EB778FD' `
,'167E095D-2710-4F3F-9289-91BC12BFB0DD' `
,'1737BF8E-4131-45A3-9B17-9B8A72E2A154' `
,'18C6EF37-A687-4601-9E73-C2DA118760EC' `
,'18FFD30F-69CA-4F44-B8C5-0BFEBCF2EE8B' `
,'1A3A58AE-960A-465D-9F36-525C1EE4C7E1' `
,'1B286DDF-8D32-432E-AC3A-496F9B69579C' `
,'1C7E27B1-75D8-49E0-969A-2B5AA785EA0F' `
,'1D8990F0-2083-4105-BD70-00A0C3722754' `
,'20DAB8C3-1FFF-49BC-A147-02B15C1BFE0B' `
,'264CABA6-4456-42EE-8A57-A07995B4389A' `
,'267D144B-FC65-494F-A1C8-B11F373491A5' `
,'26965672-D9ED-4FC1-87A2-A11D37065F01' `
,'2883FD9C-FAA7-4689-A706-E70E0FC97C06' `
,'296A14BC-3499-4EC0-B5E6-8239A8EBC282' `
,'2A20BA17-7EBC-4783-B396-72D5AA155B4E' `
,'2D22CFAF-4B85-420F-92EC-7E8179A8152F' `
,'383A03DA-83D0-470A-B36D-C815912C4B00' `
,'391C09BD-577F-4177-968C-3AEE70B1514F' `
,'3A1290D3-31AA-4DFB-9BA1-26EB8396B2A9' `
,'3D2D8126-BF1F-41E1-9140-F1315CEE7F2B' `
,'40167E65-5069-466E-B98D-040D40ACA192' `
,'405BA7D6-D441-453B-A3BA-8AF999D3E084' `
,'41D0CD90-710D-4AA9-84AC-2F6C92352211' `
,'41F5AA0B-DE85-42F8-B89C-0DEA570ADE53' `
,'42F22128-C28E-4F68-AD90-53442EE41FD3' `
,'45BAB299-4D55-4C40-94CD-33303831425C' `
,'476408BB-4320-4281-8862-825C3434424C' `
,'4A1A9FD2-C67B-4E29-8FB4-189E47E50431' `
,'4F12C9B2-27BF-4770-B98E-220AE4DBFAA4' `
,'4F449E4B-F043-4F57-9279-14DAFC078A0D' `
,'5107DEC1-4F6A-4F85-8CDD-1A351C45991D' `
,'5303A628-7611-41A8-8C63-65E721CA172F' `
,'54561257-C9EE-40B4-99D6-E6423B5BBF9C' `
,'550856C3-C583-4A4F-807A-885E9C629894' `
,'5525B1F1-947A-48F3-8736-CB5BFD68FD90' `
,'57676BE0-8F0F-43FF-ACAC-F82A8162F334' `
,'57F56D09-E877-476A-A300-91EC7A320FC4' `
,'58B7D834-D824-438F-A85D-2C5AB69BB236' `
,'5B37422A-CA29-416B-A1C1-41E8BCC7A074' `
,'5D1AB8E3-1A4A-4C59-B19B-F5AC0351EEEA' `
,'5D71227F-F845-4B42-9949-BC73CF930A88' `
,'5D7AE3E2-1D45-448C-A6F2-06661557885C' `
,'5E523DA6-A6B6-4E20-8A99-A37CD521D3ED' `
,'5F31D23A-C777-4123-982F-5E7D71090FB9' `
,'5FF1D38D-02AB-46EA-97BC-9E3C22B51D9D' `
,'5FFA9A1B-84E9-4B7E-8787-3A7D86D86C21' `
,'630AD8B9-0EC7-4742-800F-48A41EAC1585' `
,'679558F1-0DC7-494B-8A73-7A186D9845D3' `
,'68CAB380-34F3-4FDC-A5BB-B934F8B2D57F' `
,'6A103F2A-804F-41BB-BD3D-00C2AA64EC92' `
,'6C57C487-5D95-40CF-A99A-061958FDFAA4' `
,'6D5DDBAE-B978-438A-B401-8579025BD48C' `
,'70D341D5-9946-46AC-96D5-D7B1828DD8B5' `
,'71633062-EF84-49E8-9376-50CEC5E13444' `
,'7171078C-7258-4218-B114-1C347F11B28F' `
,'723BD86D-408F-4C5D-A65F-C70DAFBB3CD0' `
,'79FACBC2-8B71-4BF4-A707-768E138DFBF7' `
,'7CE38161-0630-4613-876B-BEA7C5A32314' `
,'7E2540A6-40F8-4618-A4AF-E04EFAD1FA13' `
,'810EA27B-D8AB-4AF8-B800-4248483D0B79' `
,'858878E5-40BA-4BF3-9C3E-4C334B810FB3' `
,'8ACBC8B7-7C4D-4DA3-BC33-85082467E24B' `
,'8C990200-9E68-4BFF-995A-17EA87736D05' `
,'8D5C4D3B-A7FD-4089-A4FA-181AEB8F07A1' `
,'8DA6CA6F-C361-4817-8DF9-977E348D0C75' `
,'8EE686C1-1E49-4DB1-81B3-416F8E58EC81' `
,'8F115828-2DF4-47A0-B53F-44A9CEDEC5EC' `
,'8F622CF5-0904-4D0E-8820-9BCAD69C6AD0' `
,'8F79B263-D70D-4895-A540-D5EF5C05F251' `
,'905AC724-4A56-415B-A223-036F137001E7' `
,'935738C0-F4F5-4349-9E8A-4CC6FE3F6F99' `
,'95826F5C-5578-411E-85DF-EF7B1DDF5BA8' `
,'960B2435-CBE8-40D1-9C8C-ED395A8E3EE2' `
,'99ACD97E-574E-42E7-8FDB-FE5B769B6832' `
,'9A95D2E3-BDB5-4714-B4AC-10DB3D68CAAB' `
,'9E0BE360-0DD0-4FDA-9542-F1965073971C' `
,'AE9C1479-CCF7-4759-8FCA-EAAF30E496A0' `
,'AEB51358-674C-4EA0-99BF-B5DA3C36F572' `
,'AFECF1D9-07B1-4593-B474-1F8D47D297A4' `
,'B1167827-FEDF-4D67-9B39-56A3EA177604' `
,'B1C4DAE1-72BE-4F6A-AC30-488D5347DB4A' `
,'B23A3E9E-3E2B-4B9F-8A4C-0E466411370C' `
,'B3350F72-81F8-4891-8C35-6961CC69B826' `
,'B4BFF7A5-BFC1-4113-8E80-4ED1F0B463A5' `
,'BC1F1E35-6D5C-4CB6-930B-B3AC18BC611F' `
,'BF9A5D8D-70BC-47CD-ACAF-A49A6E159B19' `
,'BFFA7F1B-E26C-4997-84B9-05826E12241A' `
,'C0679846-15F8-45C8-A741-6384486674FC' `
,'C3108B62-D97A-4F9F-8AA8-BC89524081FA' `
,'C5D7C794-7C96-4403-BBDA-AD92AFF08868' `
,'C6CB83A5-1494-4E9C-BE5E-156CB16E05A6' `
,'C9D84842-61AF-4C9B-A59A-858D6AC3E430' `
,'CB64C7D7-F104-400B-B7B7-C57D30096140' `
,'CF6EB3C7-7391-45D8-8214-A31A8F87D2A7' `
,'D39C97C1-8124-4874-B695-87852D80440A' `
,'D3D20EE0-7936-4758-B0FB-D80022DA01D7' `
,'D6B681EA-66A7-4F1F-88AA-FABB1D348258' `
,'DC43CE31-6973-4372-8862-C478B881CEBB' `
,'DD3CBE8C-DC1F-43C1-AFFF-EED99BF90D22' `
,'DD80299E-C794-478E-A06C-94CBF8B6F045' `
,'DD9DC364-E5FF-490C-9047-EEE450D24207' `
,'E093B0AB-8478-41CC-B563-37AEEC7B3E2E' `
,'E33537F7-207B-4944-9F69-ABC3BCE1AD7E' `
,'E4D50B8F-89BB-4ADC-A1AE-58F260C98627' `
,'E65AA4C5-453B-4AD1-AE03-3EE5782BDBBF' `
,'E7AE7B63-8AE0-4080-A3F5-D0538C510B3A' `
,'E94A50C8-B5E5-436C-B435-4D713B17975C' `
,'E959E471-1D3B-4360-9FEF-2D3183C22082' `
,'EAF060D4-C6BA-4584-B521-6801E3F41D3E' `
,'ED240063-DC08-4A35-8A5B-181A5EB25E46' `
,'EF5AE5EA-4569-49E3-A69D-2D6C3F82E697' `
,'F2DD474B-1C6E-424A-BDED-46C449778E7F' `
,'F3FE68B6-CC7D-4002-8904-F38C69150800' `
,'F8756F5F-3BF8-484C-A2B0-A27E4CB22F9B' `
,'F906A0C0-FD9E-4CB5-9127-3D12992A9BA6' `
,'F964225C-6DE3-4BAC-94B0-5E93E10AE7E3' `
,'F9A17EFF-A929-4F84-8C56-79640BD1DC35' `
,'FB6169D6-CDE6-4C45-B209-50C4EF312B09' `
,'FCED63DC-B53E-4DCE-A5EF-A99332924D49' `
,'FFD322EF-A615-4040-AFB5-ED47B198F173' `
	-DisableOnDestination -Force |ft -AutoSize
}
